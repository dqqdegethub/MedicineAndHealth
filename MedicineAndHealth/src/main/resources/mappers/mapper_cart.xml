<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://www.mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MedicineAndHealth.customer">
	<resultMap type="MedicineAndHealth.entity.Cart" id="cartMap">
		<result column="medicineId" property="medicineId"/>
		<result column="medicineName" property="medicineName"/>
		<result column="medicineSize" property="size"/>
		<result column="price" property="price"/>
		<result column="count" property="count"/>
		<result column="amount" property="stockAmount"/>
	</resultMap>
	
	
	<select id="cartCount" parameterType="java.lang.Integer" resultType="java.lang.Integer">
		SELECT 
			COUNT(medicineid)
		FROM 
			cart
		WHERE customerid = #{customerId}
	</select>
	
	<select id="selectCart" parameterType="java.lang.Integer" resultMap="cartMap">
		SELECT 
			medicine.id as medicineId,
			medicine.name as medicineName,
			information.size as medicineSize,
			price,
			count,
			amount
		FROM 
			medicine,cart,information
		WHERE 
			medicine.id = cart.medicineid AND medicine.id = information.medicineid AND cart.customerid = #{customerId} 
	</select>
</mapper>